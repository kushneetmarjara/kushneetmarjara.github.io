<!DOCTYPE html>
<html lang="en-CA">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>My Work - kushneet marjara</title>
    <meta
      name="description"
      content="Explore the portfolio and creative work of Kushneet Marjara - Projects, Poster Designs, and Picture Gallery."
    />
    
    <!-- Security Headers -->
    <meta http-equiv="X-Frame-Options" content="SAMEORIGIN" />
    <meta name="referrer" content="strict-origin-when-cross-origin" />
    <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()" />
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://kushneetmarjara.github.io/my-work.html" />
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="My Work - Kushneet Marjara" />
    <meta property="og:description" content="Explore the portfolio and creative work of Kushneet Marjara - Projects, Poster Designs, and Picture Gallery." />
    <meta property="og:url" content="https://kushneetmarjara.github.io/my-work.html" />
    <meta property="og:site_name" content="Kushneet Marjara Portfolio" />
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="My Work - Kushneet Marjara" />
    <meta name="twitter:description" content="Explore the portfolio and creative work of Kushneet Marjara - Projects, Poster Designs, and Picture Gallery." />
    
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="stylesheet" href="assets/css/styles.css" />
    <link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/photoswipe@5.4.3/dist/photoswipe.css" onload="this.onload=null;this.rel='stylesheet'" />
    <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@5.4.3/dist/photoswipe.css" /></noscript>
  </head>
  <body>
    <svg aria-hidden="true" class="gear-mask-defs" width="0" height="0">
      <defs>
        <path
          id="gear-shape"
          d="M 28.0000 50.8281 C 28.6094 50.8281 29.1719 50.7578 29.8047 50.7110 L 31.1641 53.2891 C 31.4219 53.8047 31.9375 54.0859 32.5704 53.9922 C 33.1563 53.8750 33.5782 53.4532 33.6485 52.8203 L 34.0704 49.9844 C 35.2188 49.6797 36.3672 49.2344 37.4922 48.7422 L 39.6016 50.6406 C 40.0469 51.0625 40.6094 51.1563 41.1953 50.8281 C 41.7110 50.5469 41.9219 49.9844 41.8047 49.3750 L 41.2188 46.5625 C 42.1797 45.8828 43.1407 45.1094 44.0078 44.2422 L 46.6328 45.3438 C 47.2189 45.5781 47.7579 45.4610 48.2034 44.9219 C 48.6018 44.5000 48.6483 43.8906 48.3205 43.3750 L 46.7970 40.9375 C 47.5002 39.9532 48.0627 38.8984 48.6018 37.7735 L 51.4611 37.9141 C 52.0703 37.9375 52.5858 37.6094 52.7970 37.0235 C 52.9842 36.4375 52.7970 35.8750 52.3045 35.5 L 50.0783 33.7188 C 50.3831 32.5937 50.6173 31.3750 50.7109 30.1094 L 53.4296 29.2657 C 54.0157 29.0547 54.3906 28.6094 54.3906 27.9766 C 54.3906 27.3672 54.0157 26.9219 53.4296 26.7110 L 50.7109 25.8437 C 50.6173 24.5781 50.3831 23.4063 50.0783 22.2578 L 52.3045 20.4532 C 52.7970 20.1016 52.9842 19.5625 52.7970 18.9766 C 52.5858 18.3906 52.0703 18.0625 51.4611 18.0859 L 48.6018 18.2032 C 48.0627 17.0781 47.5002 16.0235 46.7970 15.0391 L 48.3205 12.6016 C 48.6483 12.1094 48.6018 11.5000 48.2034 11.0781 C 47.7579 10.5391 47.2189 10.3984 46.6328 10.6563 L 44.0078 11.7110 C 43.1407 10.8906 42.1797 10.0937 41.2188 9.4141 L 41.8047 6.6250 C 41.9219 5.9922 41.7110 5.4297 41.1953 5.1484 C 40.6094 4.8437 40.0469 4.8906 39.6016 5.3594 L 37.4922 7.2110 C 36.3672 6.7188 35.2188 6.3203 34.0704 5.9922 L 33.6485 3.1563 C 33.5782 2.5469 33.1563 2.1016 32.5704 2.0078 C 31.9375 1.9141 31.4219 2.1719 31.1641 2.6875 L 29.8047 5.2657 C 29.1719 5.2188 28.6094 5.1719 28.0000 5.1719 C 27.3672 5.1719 26.8047 5.2188 26.1485 5.2657 L 24.8126 2.6875 C 24.5547 2.1719 24.0391 1.9141 23.3829 2.0078 C 22.7969 2.1016 22.3985 2.5469 22.3047 3.1563 L 21.9063 5.9688 C 20.7344 6.3203 19.5860 6.7188 18.4844 7.2110 L 16.3751 5.3594 C 15.9063 4.8906 15.3438 4.8437 14.7813 5.1484 C 14.2657 5.4297 14.0313 5.9922 14.1719 6.6250 L 14.7579 9.4141 C 13.7735 10.0937 12.8360 10.8906 11.9688 11.7110 L 9.3672 10.6563 C 8.7579 10.3984 8.2188 10.5391 7.7735 11.0781 C 7.3985 11.5000 7.3282 12.1094 7.6563 12.6016 L 9.1797 15.0391 C 8.4766 16.0235 7.9141 17.0781 7.3751 18.2032 L 4.5391 18.0859 C 3.9063 18.0625 3.3907 18.3906 3.2032 18.9766 C 2.9922 19.5625 3.1797 20.1016 3.6719 20.4532 L 5.8985 22.2578 C 5.5938 23.4063 5.3360 24.5781 5.2657 25.8437 L 2.5704 26.7110 C 1.9610 26.9219 1.5860 27.3672 1.5860 27.9766 C 1.5860 28.6094 1.9610 29.0547 2.5704 29.2657 L 5.2657 30.1094 C 5.3360 31.3750 5.5938 32.5937 5.8985 33.7188 L 3.6719 35.5 C 3.1797 35.8750 2.9922 36.4375 3.2032 37.0235 C 3.3907 37.6094 3.9063 37.9375 4.5391 37.9141 L 7.3751 37.7735 C 7.9141 38.8984 8.4766 39.9532 9.1797 40.9375 L 7.6563 43.3750 C 7.3282 43.8906 7.3985 44.5000 7.7735 44.9219 C 8.2188 45.4610 8.7579 45.5781 9.3672 45.3438 L 11.9688 44.2422 C 12.8360 45.1094 13.7735 45.8828 14.7579 46.5625 L 14.1719 49.3750 C 14.0313 49.9844 14.2657 50.5469 14.7813 50.8281 C 15.3438 51.1563 15.9063 51.0625 16.3751 50.6406 L 18.4844 48.7422 C 19.5860 49.2344 20.7344 49.6797 21.9063 49.9844 L 22.3047 52.8203 C 22.3985 53.4532 22.7969 53.8750 23.3829 53.9922 C 24.0391 54.0859 24.5547 53.8047 24.8126 53.2891 L 26.1485 50.7110 C 26.8047 50.7578 27.3672 50.8281 28.0000 50.8281 Z M 28.0000 40.4375 C 21.1875 40.4375 15.5391 34.8125 15.5391 27.9766 C 15.5391 21.1641 21.1875 15.5391 28.0000 15.5391 C 34.7891 15.5391 40.4375 21.1641 40.4375 27.9766 C 40.4375 34.8125 34.7891 40.4375 28.0000 40.4375 Z"
        />
        <mask id="gear-mask" maskUnits="objectBoundingBox" maskContentUnits="objectBoundingBox">
          <rect width="1" height="1" fill="black" />
          <use href="#gear-shape" fill="white" transform="scale(0.017857142857142856)" />
        </mask>
        <clipPath id="gear-clip" clipPathUnits="objectBoundingBox">
          <use href="#gear-shape" transform="scale(0.017857142857142856)" />
        </clipPath>
      </defs>
    </svg>
    
    <header id="top">
      <div class="header-inner">
        <a class="logo" href="index.html">kushneet marjara</a>
        <nav class="primary-nav" aria-label="Primary">
          <a href="index.html">Home</a>
          <a href="my-work.html">My Work</a>
          <a href="resume.html">Resume</a>
          <a href="contact.html">Contact</a>
        </nav>
        <button class="mobile-menu-toggle" aria-label="Toggle menu" aria-expanded="false">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
          </svg>
        </button>
      </div>
      <nav class="mobile-nav" aria-label="Mobile navigation">
        <a href="index.html">Home</a>
        <a href="my-work.html">My Work</a>
        <a href="resume.html">Resume</a>
        <a href="contact.html">Contact</a>
      </nav>
    </header>

    <main>
      <!-- Banner Section -->
      <section class="work-banner">
        <div class="work-banner-inner">
          <h1>MY WORK - PROJECTS AND MORE</h1>
        </div>
      </section>

      <!-- Projects Section -->
      <section class="projects-section">
        <div class="projects-inner">
          <h2>PROJECTS</h2>
          
          <div class="project-grid">
            <!-- Project 1: Blue Tokai -->
            <article class="project-item">
              <div class="video-wrapper iframe-wrapper">
                <iframe src="https://drive.google.com/file/d/1eZe8CgMuknqGwgUe08O_i6tOw8YNr63R/preview" title="Blue Tokai Coffee" allow="autoplay" allowfullscreen class="project-iframe" loading="lazy"></iframe>
              </div>
              <div class="project-info">
                <h3>Blue Tokai Coffee</h3>
                <p>A creative visual storytelling project showcasing brand narrative and product experience.</p>
              </div>
            </article>

            <!-- Project 2: Got Organs? Donate -->
            <article class="project-item">
              <div class="pdf-viewer" data-pdf-src="assets/projects_data/Got Organs Donate.pdf">
                <div class="pdf-viewer__status">Loading documentâ€¦</div>
              </div>
              <div class="project-info">
                <h3>Got Organs? Donate</h3>
                <p>Campaign proposal encouraging organ donation awareness and participation.</p>
              </div>
            </article>

            <!-- Project 3: Greek Nude Art -->
            <article class="project-item">
              <div class="video-wrapper iframe-wrapper">
                <iframe src="https://drive.google.com/file/d/1T6lLHUPJH21kgP77kirTJseWOj4N8CW1/preview" title="Greek Nude in Art" allow="autoplay" allowfullscreen class="project-iframe" loading="lazy"></iframe>
              </div>
              <div class="project-info">
                <h3>Greek Nude in Art</h3>
                <p>Exploring the artistic representation and cultural context of the human form in ancient Greek art.</p>
              </div>
            </article>

            <!-- Project 4: Digital Magazine -->
            <article class="project-item">
              <div class="video-wrapper iframe-wrapper">
                <iframe src="https://simplebooklet.com/digitalmagazinemarketingwithaicontent" title="Digital Magazine - AI Content Marketing" frameborder="0" allowfullscreen class="project-iframe" allow="fullscreen" sandbox="allow-scripts allow-same-origin allow-popups allow-forms" scrolling="auto" loading="lazy"></iframe>
              </div>
              <div class="project-info">
                <h3>Digital Magazine - AI Content Marketing</h3>
                <p>An interactive digital magazine exploring the intersection of artificial intelligence and content marketing strategies.</p>
              </div>
              <p class="project-note">Note: This viewer is powered by SimpleBooklet. Refresh the page to reset the viewer if it becomes unresponsive.</p>
            </article>

            <!-- Project 5: Brand Audit -->
            <article class="project-item">
              <div class="pdf-viewer" data-pdf-src="assets/projects_data/Brand Audit Presentation.pdf">
                <div class="pdf-viewer__status">Loading documentâ€¦</div>
              </div>
              <div class="project-info">
                <h3>Brand Audit Project</h3>
                <p>Comprehensive brand analysis examining market positioning, identity, and strategic recommendations.</p>
              </div>
            </article>

            <!-- Project 6: Music Trends YouTube -->
            <article class="project-item">
              <div class="video-wrapper iframe-wrapper">
                <iframe src="https://www.youtube-nocookie.com/embed/HLvCl3tE2WQ?rel=0&modestbranding=1" title="Shifting Trends in Music" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen class="project-iframe" loading="lazy"></iframe>
              </div>
              <div class="project-info">
                <h3>Shifting Trends in Music</h3>
                <p>Video essay analyzing the evolution of music consumption and production in the digital age.</p>
              </div>
            </article>

            <!-- Project 7: Hashtagtivism YouTube -->
            <article class="project-item">
              <div class="video-wrapper iframe-wrapper">
                <iframe src="https://www.youtube-nocookie.com/embed/E_oW2FAq2qw?si=PzjXDCSE7cU125CW" title="Hashtagtivism" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen class="project-iframe" loading="lazy"></iframe>
              </div>
              <div class="project-info">
                <h3>Hashtagtivism</h3>
                <p>Examining the role of social media activism and digital movements in contemporary social change.</p>
              </div>
            </article>
          </div>
        </div>
      </section>

      <!-- Poster Designs Section -->
      <section class="posters-section">
        <div class="posters-inner">
          <h2>POSTER DESIGNS</h2>
          <div class="posters-grid">
            <figure class="poster-item">
              <img src="assets/images/posters/optimized/AI-Generated Content Marketing.webp" alt="AI-Generated Content Marketing Poster" loading="lazy" decoding="async">
            </figure>
            <figure class="poster-item">
              <img src="assets/images/posters/optimized/Poster- Organ Donation.webp" alt="Organ Donation Awareness Poster" loading="lazy" decoding="async">
            </figure>
            <figure class="poster-item">
              <img src="assets/images/posters/optimized/Poster- Pride.webp" alt="Pride Celebration Poster" loading="lazy" decoding="async">
            </figure>
            <figure class="poster-item">
              <img src="assets/images/posters/optimized/Poster-JNU.webp" alt="JNU Campaign Poster" loading="lazy" decoding="async">
            </figure>
            <figure class="poster-item">
              <img src="assets/images/posters/optimized/Screenshot 2022-10-18 at 6.25.07 PM.webp" alt="Creative Design Poster" loading="lazy" decoding="async">
            </figure>
          </div>
        </div>
      </section>

      <!-- Picture Gallery Section -->
      <section class="gallery-section">
        <div class="gallery-inner">
          <h2>PICTURE GALLERY</h2>
          <div class="gallery-grid">
            <figure class="gallery-item">
              <img src="assets/images/gallery/optimized/IMG_6864.webp" alt="Gallery Image 1" loading="lazy" decoding="async">
            </figure>
            <figure class="gallery-item">
              <img src="assets/images/gallery/optimized/IMG_1561.webp" alt="Gallery Image 2" loading="lazy" decoding="async">
            </figure>
            <figure class="gallery-item">
              <img src="assets/images/gallery/optimized/IMG_6409.webp" alt="Gallery Image 3" loading="lazy" decoding="async">
            </figure>
            <figure class="gallery-item">
              <img src="assets/images/gallery/optimized/IMG_3157.webp" alt="Gallery Image 4" loading="lazy" decoding="async">
            </figure>
            <figure class="gallery-item">
              <img src="assets/images/gallery/optimized/IMG_6527.webp" alt="Gallery Image 5" loading="lazy" decoding="async">
            </figure>
            <figure class="gallery-item">
              <img src="assets/images/gallery/optimized/13b407c9-ae0d-465a-8864-884746a5ce75.webp" alt="Gallery Image 6" loading="lazy" decoding="async">
            </figure>
          </div>
        </div>
      </section>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        <div class="footer-brand">
          <h2 class="footer-title">KUSHNEET MARJARA</h2>
          <p class="footer-location">Toronto, ON Canada</p>
        </div>
        <div class="footer-cta">
          <div class="footer-social">
            <a href="https://www.linkedin.com/in/kushneet-marjara/" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn" class="footer-social-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z" fill="#111118"/>
              </svg>
            </a>
            <a href="mailto:kushneet99@gmail.com" aria-label="Email" class="footer-social-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 3v18h24v-18h-24zm6.623 7.929l-4.623 5.712v-9.458l4.623 3.746zm-4.141-5.929h19.035l-9.517 7.713-9.518-7.713zm5.694 7.188l3.824 3.099 3.83-3.104 5.612 6.817h-18.779l5.513-6.812zm9.208-1.264l4.616-3.741v9.348l-4.616-5.607z" fill="#111118"/>
              </svg>
            </a>
          </div>
          <p class="footer-cta-text">Get in Touch.</p>
        </div>
      </div>
    </footer>
    
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js" integrity="sha384-/1qUCSGwTur9vjf/z9lmu/eCUYbpOTgSjmpbMQZ1/CtX2v/WcAIKqRv+U1DUCG6e" crossorigin="anonymous"></script>
    <script>
      // Mobile menu toggle
      const menuToggle = document.querySelector('.mobile-menu-toggle');
      const mobileNav = document.querySelector('.mobile-nav');
      
      if (menuToggle && mobileNav) {
        menuToggle.addEventListener('click', function() {
          const isOpen = mobileNav.classList.toggle('is-open');
          menuToggle.setAttribute('aria-expanded', isOpen);
        });

        // Close menu when clicking a link
        mobileNav.querySelectorAll('a').forEach(link => {
          link.addEventListener('click', () => {
            mobileNav.classList.remove('is-open');
            menuToggle.setAttribute('aria-expanded', 'false');
          });
        });
      }

      // Custom video player enhancement
      document.querySelectorAll('.project-video').forEach(video => {
        video.addEventListener('loadedmetadata', function() {
          this.setAttribute('poster', '');
        });
      });

      // Dynamic Masonry Layout Enhancement
      function optimizeMasonryLayout() {
        const postersGrid = document.querySelector('.posters-grid');
        const galleryGrid = document.querySelector('.gallery-grid');
        
        // Function to adjust column count based on container width
        function adjustColumns(grid, baseColumns) {
          if (!grid) return;
          
          const width = grid.offsetWidth;
          let columnCount;
          
          if (width < 480) {
            columnCount = 1;
          } else if (width < 768) {
            columnCount = 2;
          } else if (width < 1024) {
            columnCount = baseColumns === 4 ? 3 : 2;
          } else {
            columnCount = baseColumns;
          }
          
          grid.style.columnCount = columnCount;
        }
        
        if (postersGrid) adjustColumns(postersGrid, 3);
        if (galleryGrid) adjustColumns(galleryGrid, 4);
      }
      
      // Run on load and resize
      window.addEventListener('load', optimizeMasonryLayout);
      window.addEventListener('resize', debounce(optimizeMasonryLayout, 150));
      
      // Debounce function for performance
      function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
          const later = () => {
            clearTimeout(timeout);
            func(...args);
          };
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
        };
      }
      
      // Dynamic Masonry Layout
      function createMasonryLayout(containerSelector, itemSelector, options = {}) {
        const container = document.querySelector(containerSelector);
        if (!container) return;

        const items = Array.from(container.querySelectorAll(itemSelector));
        if (!items.length) return;

        const minColumnWidth = options.minColumnWidth || 280;
        const gap = options.gap || 24;

        function layoutMasonry() {
          const containerWidth = container.offsetWidth;
          const columnCount = Math.max(1, Math.floor((containerWidth + gap) / (minColumnWidth + gap)));
          const columnWidth = Math.min(minColumnWidth, (containerWidth - (gap * (columnCount - 1))) / columnCount);
          
          const columnHeights = new Array(columnCount).fill(0);
          let processedCount = 0;
          
          items.forEach((item, index) => {
            const img = item.querySelector('img');
            if (!img) return;

            // Wait for image to load to get accurate dimensions
            const processItem = () => {
              if (!img.naturalWidth || !img.naturalHeight) return;
              
              const imgAspectRatio = img.naturalHeight / img.naturalWidth;
              const itemHeight = columnWidth * imgAspectRatio;
              
              // Find shortest column
              const shortestColumnIndex = columnHeights.indexOf(Math.min(...columnHeights));
              const x = shortestColumnIndex * (columnWidth + gap);
              const y = columnHeights[shortestColumnIndex];
              
              // Ensure item stays within container bounds
              if (x + columnWidth <= containerWidth) {
                item.style.left = `${x}px`;
                item.style.top = `${y}px`;
                item.style.width = `${columnWidth}px`;
                item.classList.add('masonry-loaded');
                
                columnHeights[shortestColumnIndex] += itemHeight + gap;
              }
              
              processedCount++;
              if (processedCount === items.length) {
                const maxHeight = Math.max(...columnHeights);
                container.style.height = `${maxHeight}px`;
              }
            };

            if (img.complete && img.naturalWidth > 0) {
              processItem();
            } else {
              img.addEventListener('load', processItem, { once: true });
            }
          });
        }

        // Initial layout
        Promise.all(
          items.map(item => {
            const img = item.querySelector('img');
            if (!img) return Promise.resolve();
            if (img.complete) return Promise.resolve();
            return new Promise(resolve => {
              img.addEventListener('load', resolve);
              img.addEventListener('error', resolve);
            });
          })
        ).then(() => {
          layoutMasonry();
        });

        // Re-layout on window resize
        let resizeTimeout;
        window.addEventListener('resize', () => {
          clearTimeout(resizeTimeout);
          resizeTimeout = setTimeout(layoutMasonry, 150);
        });
      }

      // Initialize masonry layouts
      createMasonryLayout('.posters-grid', '.poster-item', { minColumnWidth: 336, gap: 28 });
      createMasonryLayout('.gallery-grid', '.gallery-item', { minColumnWidth: 304, gap: 20 });


      // PDF viewer rendering - wait for PDF.js to load (deferred script)
      function initializePdfViewers() {
        const pdfElements = document.querySelectorAll('.pdf-viewer');
        if (!pdfElements.length) {
          return;
        }

        const pdfjs = window.pdfjsLib || (window['pdfjs-dist/build/pdf'] || null);

        if (!pdfjs) {
          // If PDF.js hasn't loaded yet, wait a bit and try again
          if (typeof window.pdfjsLibLoadRetries === 'undefined') {
            window.pdfjsLibLoadRetries = 0;
          }
          
          if (window.pdfjsLibLoadRetries < 20) {
            window.pdfjsLibLoadRetries++;
            setTimeout(initializePdfViewers, 100);
            return;
          }
          
          // Give up after retries
          pdfElements.forEach(viewer => {
            viewer.classList.add('pdf-viewer--error');
            const statusEl = viewer.querySelector('.pdf-viewer__status');
            if (statusEl) {
              statusEl.textContent = 'PDF viewer unavailable. Use the Drive link.';
            }
          });
          return;
        }

        pdfjs.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';

        pdfElements.forEach(viewer => {
          const src = viewer.dataset.pdfSrc;
          if (!src) {
            return;
          }
          renderPdfIntoViewer(pdfjs, viewer, src);
        });
      }
      
      // Initialize when DOM is ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initializePdfViewers);
      } else {
        initializePdfViewers();
      }

      async function renderPdfIntoViewer(pdfjs, viewer, src) {
        const statusEl = viewer.querySelector('.pdf-viewer__status');
        let scroller = viewer.querySelector('.pdf-viewer__scroller');
        if (!scroller) {
          scroller = document.createElement('div');
          scroller.className = 'pdf-viewer__scroller';
          const fallbackLink = viewer.querySelector('.pdf-viewer__fallback');
          viewer.insertBefore(scroller, fallbackLink || null);
        }

        let intersectionObserver;

        try {
          const loadingTask = pdfjs.getDocument({ url: src, withCredentials: false });
          const pdfDoc = await loadingTask.promise;

          if (statusEl) {
            statusEl.textContent = pdfDoc.numPages > 1 ? `Page 1 of ${pdfDoc.numPages}` : 'Page 1';
          }

          intersectionObserver = new IntersectionObserver(entries => {
            entries.forEach(entry => {
              if (entry.isIntersecting) {
                const pageIndex = Number(entry.target.dataset.pageIndex);
                if (statusEl && Number.isFinite(pageIndex)) {
                  statusEl.textContent = pdfDoc.numPages > 1 ? `Page ${pageIndex} of ${pdfDoc.numPages}` : `Page ${pageIndex}`;
                }
              }
            });
          }, { root: scroller, threshold: 0.6 });

          for (let pageNumber = 1; pageNumber <= pdfDoc.numPages; pageNumber += 1) {
            const page = await pdfDoc.getPage(pageNumber);
            const baseViewport = page.getViewport({ scale: 1 });
            const containerWidth = viewer.clientWidth || scroller.clientWidth || baseViewport.width;
            const targetWidth = containerWidth * 0.82;
            const scale = Math.max(0.5, Math.min(2.4, targetWidth / baseViewport.width));
            const viewport = page.getViewport({ scale });

            const canvas = document.createElement('canvas');
            canvas.className = 'pdf-viewer__canvas';
            canvas.width = viewport.width;
            canvas.height = viewport.height;

            const context = canvas.getContext('2d', { alpha: false });
            await page.render({ canvasContext: context, viewport }).promise;

            const pageWrapper = document.createElement('div');
            pageWrapper.className = 'pdf-viewer__page';
            pageWrapper.dataset.pageIndex = String(pageNumber);
            pageWrapper.appendChild(canvas);

            scroller.appendChild(pageWrapper);
            intersectionObserver.observe(pageWrapper);
          }

          scroller.scrollLeft = 0;

          // Add navigation arrows
          const navLeft = document.createElement('button');
          navLeft.className = 'pdf-viewer__nav pdf-viewer__nav--left';
          navLeft.setAttribute('aria-label', 'Previous page');
          navLeft.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>';
          
          const navRight = document.createElement('button');
          navRight.className = 'pdf-viewer__nav pdf-viewer__nav--right';
          navRight.setAttribute('aria-label', 'Next page');
          navRight.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>';
          
          viewer.appendChild(navLeft);
          viewer.appendChild(navRight);

          // Keyboard navigation for PDF pages
          let isScrolling = false;
          let currentVisiblePage = 0;
          scroller.setAttribute('tabindex', '-1');
          
          // Track current page via intersection observer
          const pageTracker = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
              if (entry.isIntersecting && entry.intersectionRatio > 0.5) {
                const pageIndex = Number(entry.target.dataset.pageIndex);
                if (Number.isFinite(pageIndex)) {
                  currentVisiblePage = pageIndex - 1; // Convert to 0-indexed
                }
              }
            });
          }, { root: scroller, threshold: 0.5 });
          
          scroller.querySelectorAll('.pdf-viewer__page').forEach(page => {
            pageTracker.observe(page);
          });
          
          const navigateToPage = (direction) => {
            if (isScrolling) return;
            
            const pages = Array.from(scroller.querySelectorAll('.pdf-viewer__page'));
            if (!pages.length) return;

            const targetIndex = direction === 'next' 
              ? Math.min(currentVisiblePage + 1, pages.length - 1)
              : Math.max(currentVisiblePage - 1, 0);
            
            if (targetIndex !== currentVisiblePage) {
              isScrolling = true;
              pages[targetIndex].scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
              currentVisiblePage = targetIndex;
              setTimeout(() => { isScrolling = false; }, 600);
            }
            
            // Update arrow visibility
            navLeft.style.opacity = targetIndex === 0 ? '0.3' : '1';
            navLeft.style.pointerEvents = targetIndex === 0 ? 'none' : 'auto';
            navRight.style.opacity = targetIndex === pages.length - 1 ? '0.3' : '1';
            navRight.style.pointerEvents = targetIndex === pages.length - 1 ? 'none' : 'auto';
          };

          navLeft.addEventListener('click', () => navigateToPage('prev'));
          navRight.addEventListener('click', () => navigateToPage('next'));
          
          viewer.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === 'Right') {
              e.preventDefault();
              navigateToPage('next');
            } else if (e.key === 'ArrowLeft' || e.key === 'Left') {
              e.preventDefault();
              navigateToPage('prev');
            }
          });
          
          // Initialize arrow states
          navLeft.style.opacity = '0.3';
          navLeft.style.pointerEvents = 'none';

          viewer.classList.add('pdf-viewer--loaded');
        } catch (error) {
          console.error('PDF viewer error:', error);
          viewer.classList.add('pdf-viewer--error');
          if (statusEl) {
            statusEl.textContent = 'Unable to display PDF. Use the Drive link below.';
          }
          if (intersectionObserver) {
            intersectionObserver.disconnect();
          }
        }
      }
    </script>
    <script type="module">
      import PhotoSwipeLightbox from 'https://cdn.jsdelivr.net/npm/photoswipe@5.4.3/dist/photoswipe-lightbox.esm.min.js';
      
      // Initialize PhotoSwipe for Poster Designs
      const posterLightbox = new PhotoSwipeLightbox({
        gallery: '.posters-grid',
        children: '.poster-item img',
        pswpModule: () => import('https://cdn.jsdelivr.net/npm/photoswipe@5.4.3/dist/photoswipe.esm.min.js'),
        bgOpacity: 0.95,
        wheelToZoom: true,
        pinchToClose: true,
        closeOnVerticalDrag: true
      });
      
      posterLightbox.addFilter('itemData', (itemData, index) => {
        const img = itemData.element;
        return {
          src: img.src,
          width: img.naturalWidth || 1920,
          height: img.naturalHeight || 1080,
          alt: img.alt || ''
        };
      });
      
      posterLightbox.on('uiRegister', function() {
        posterLightbox.pswp.ui.registerElement({
          name: 'section-label',
          order: 9,
          isButton: false,
          html: '<div class="pswp__section-label">Poster Designs</div>',
          onInit: (el, pswp) => {
            el.style.cssText = 'position: absolute; top: 20px; left: 50%; transform: translateX(-50%); color: white; font-size: 16px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.1em; background: rgba(0, 0, 0, 0.6); padding: 8px 20px; border-radius: 20px; pointer-events: none; z-index: 10;';
          }
        });
      });
      
      posterLightbox.init();
      
      // Initialize PhotoSwipe for Image Gallery
      const galleryLightbox = new PhotoSwipeLightbox({
        gallery: '.gallery-grid',
        children: '.gallery-item img',
        pswpModule: () => import('https://cdn.jsdelivr.net/npm/photoswipe@5.4.3/dist/photoswipe.esm.min.js'),
        bgOpacity: 0.95,
        wheelToZoom: true,
        pinchToClose: true,
        closeOnVerticalDrag: true
      });
      
      galleryLightbox.addFilter('itemData', (itemData, index) => {
        const img = itemData.element;
        return {
          src: img.src,
          width: img.naturalWidth || 1920,
          height: img.naturalHeight || 1080,
          alt: img.alt || ''
        };
      });
      
      galleryLightbox.on('uiRegister', function() {
        galleryLightbox.pswp.ui.registerElement({
          name: 'section-label',
          order: 9,
          isButton: false,
          html: '<div class="pswp__section-label">Picture Gallery</div>',
          onInit: (el, pswp) => {
            el.style.cssText = 'position: absolute; top: 20px; left: 50%; transform: translateX(-50%); color: white; font-size: 16px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.1em; background: rgba(0, 0, 0, 0.6); padding: 8px 20px; border-radius: 20px; pointer-events: none; z-index: 10;';
          }
        });
      });
      
      galleryLightbox.init();
      
      // Set cursor style
      document.querySelectorAll('.poster-item img, .gallery-item img').forEach(img => {
        img.style.cursor = 'pointer';
      });
    </script>
  </body>
</html>
